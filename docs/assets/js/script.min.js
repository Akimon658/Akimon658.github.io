(()=>{function ye(){let t=document.querySelector(".btn"),a;window.addEventListener("scroll",()=>{t.style.visibility="hidden",clearTimeout(a),a=setTimeout(()=>{t.style.visibility="visible"},500)}),document.getElementById("switch-theme").addEventListener("click",()=>{ze()});let c=document.getElementById("btn-menu");c&&c.addEventListener("click",()=>{be()}),document.querySelector(".btn-scroll-top").addEventListener("click",()=>{document.documentElement.scrollTop=0}),document.querySelector("span.post-comment-notloaded")&&document.querySelector("span.post-comment-notloaded").addEventListener("click",loadComment)}function J(){let t=document.body.getAttribute("data-theme");return t==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t==="dark"?"dark":"light"}function be(){let t=document.querySelector(".sidebar-mobile");t&&(t.style.display==="none"?t.setAttribute("style","display: flex;"):t.setAttribute("style","display: none;"))}function ze(){let t=J(),a=document.body.getAttribute("data-theme"),c=document.body.getAttribute("data-theme-auto")==="true",f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";if(a==="auto")document.body.setAttribute("data-theme",t==="light"?"dark":"light"),localStorage.setItem("fuji_data-theme",t==="light"?"dark":"light");else{let b;a==="light"?b=f==="dark"&&c?"auto":"dark":b=f==="light"&&c?"auto":"light",document.body.setAttribute("data-theme",b),document.documentElement.style.colorScheme=b,localStorage.setItem("fuji_data-theme",b)}let y=document.querySelector(".post-comment");y&&document.querySelector("span.post-comment-notloaded").getAttribute("style")&&(y.getAttribute("data-comment")==="utterances"&&Ee(document.querySelector(".post-comment iframe")),y.getAttribute("data-comment")==="disqus"&&DISQUS.reset({reload:!0}))}function Ee(t){let a=J();t&&(a==="dark"?t.contentWindow.postMessage({type:"set-theme",theme:"photon-dark"},"https://utteranc.es"):t.contentWindow.postMessage({type:"set-theme",theme:"github-light"},"https://utteranc.es"))}function we(){let t=document.querySelector("header"),a=t.clientHeight,c=0,f=0;document.addEventListener("scroll",()=>{c=window.scrollY,c>a&&c>f?t.style.visibility="hidden":t.style.visibility="visible",f=c})}var Le=Object.create,P=Object.defineProperty,He=Object.getOwnPropertyDescriptor,ke=Object.getOwnPropertyNames,Oe=Object.getPrototypeOf,Ce=Object.prototype.hasOwnProperty,Se=t=>P(t,"__esModule",{value:!0}),Ae=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports),Te=(t,a,c,f)=>{if(a&&typeof a=="object"||typeof a=="function")for(let y of ke(a))!Ce.call(t,y)&&(c||y!=="default")&&P(t,y,{get:()=>a[y],enumerable:!(f=He(a,y))||f.enumerable});return t},K=(t,a)=>Te(Se(P(t!=null?Le(Oe(t)):{},"default",!a&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),V=Ae((t,a)=>{(function(c,f){typeof t=="object"&&typeof a<"u"?a.exports=f():typeof define=="function"&&define.amd?define(f):(c=c||self,c.mediumZoom=f())})(t,function(){"use strict";var c=Object.assign||function(r){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(r[g]=h[g])}return r},f=function(r){return r.tagName==="IMG"},y=function(r){return NodeList.prototype.isPrototypeOf(r)},b=function(r){return r&&r.nodeType===1},B=function(r){var m=r.currentSrc||r.src;return m.substr(-4).toLowerCase()===".svg"},_=function(r){try{return Array.isArray(r)?r.filter(f):y(r)?[].slice.call(r).filter(f):b(r)?[r].filter(f):typeof r=="string"?[].slice.call(document.querySelectorAll(r)).filter(f):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},Z=function(r){var m=document.createElement("div");return m.classList.add("medium-zoom-overlay"),m.style.background=r,m},$=function(r){var m=r.getBoundingClientRect(),h=m.top,g=m.left,z=m.width,j=m.height,E=r.cloneNode(),q=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,I=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return E.removeAttribute("id"),E.style.position="absolute",E.style.top=h+q+"px",E.style.left=g+I+"px",E.style.width=z+"px",E.style.height=j+"px",E.style.transform="",E},H=function(r,m){var h=c({bubbles:!1,cancelable:!1,detail:void 0},m);if(typeof window.CustomEvent=="function")return new CustomEvent(r,h);var g=document.createEvent("CustomEvent");return g.initCustomEvent(r,h.bubbles,h.cancelable,h.detail),g},F=function r(m){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=window.Promise||function(o){function n(){}o(n,n)},z=function(o){var n=o.target;if(n===T){w();return}v.indexOf(n)!==-1&&D({target:n})},j=function(){if(!(k||!e.original)){var o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(R-o)>l.scrollOffset&&setTimeout(w,150)}},E=function(o){var n=o.key||o.keyCode;(n==="Escape"||n==="Esc"||n===27)&&w()},q=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o;if(o.background&&(T.style.background=o.background),o.container&&o.container instanceof Object&&(n.container=c({},l.container,o.container)),o.template){var u=b(o.template)?o.template:document.querySelector(o.template);n.template=u}return l=c({},l,n),v.forEach(function(i){i.dispatchEvent(H("medium-zoom:update",{detail:{zoom:s}}))}),s},I=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r(c({},l,o))},W=function(){for(var o=arguments.length,n=Array(o),u=0;u<o;u++)n[u]=arguments[u];var i=n.reduce(function(d,p){return[].concat(d,_(p))},[]);return i.filter(function(d){return v.indexOf(d)===-1}).forEach(function(d){v.push(d),d.classList.add("medium-zoom-image")}),A.forEach(function(d){var p=d.type,O=d.listener,L=d.options;i.forEach(function(C){C.addEventListener(p,O,L)})}),s},oe=function(){for(var o=arguments.length,n=Array(o),u=0;u<o;u++)n[u]=arguments[u];e.zoomed&&w();var i=n.length>0?n.reduce(function(d,p){return[].concat(d,_(p))},[]):v;return i.forEach(function(d){d.classList.remove("medium-zoom-image"),d.dispatchEvent(H("medium-zoom:detach",{detail:{zoom:s}}))}),v=v.filter(function(d){return i.indexOf(d)===-1}),s},ne=function(o,n){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return v.forEach(function(i){i.addEventListener("medium-zoom:"+o,n,u)}),A.push({type:"medium-zoom:"+o,listener:n,options:u}),s},re=function(o,n){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return v.forEach(function(i){i.removeEventListener("medium-zoom:"+o,n,u)}),A=A.filter(function(i){return!(i.type==="medium-zoom:"+o&&i.listener.toString()===n.toString())}),s},Y=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.target,u=function(){var i={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},d=void 0,p=void 0;if(l.container)if(l.container instanceof Object)i=c({},i,l.container),d=i.width-i.left-i.right-l.margin*2,p=i.height-i.top-i.bottom-l.margin*2;else{var O=b(l.container)?l.container:document.querySelector(l.container),L=O.getBoundingClientRect(),C=L.width,M=L.height,me=L.left,le=L.top;i=c({},i,{width:C,height:M,left:me,top:le})}d=d||i.width-l.margin*2,p=p||i.height-l.margin*2;var S=e.zoomedHd||e.original,ce=B(S)?d:S.naturalWidth||d,ue=B(S)?p:S.naturalHeight||p,x=S.getBoundingClientRect(),se=x.top,fe=x.left,U=x.width,G=x.height,ge=Math.min(ce,d)/U,pe=Math.min(ue,p)/G,N=Math.min(ge,pe),he=(-fe+(d-U)/2+l.margin+i.left)/N,ve=(-se+(p-G)/2+l.margin+i.top)/N,Q="scale("+N+") translate3d("+he+"px, "+ve+"px, 0)";e.zoomed.style.transform=Q,e.zoomedHd&&(e.zoomedHd.style.transform=Q)};return new g(function(i){if(n&&v.indexOf(n)===-1){i(s);return}var d=function M(){k=!1,e.zoomed.removeEventListener("transitionend",M),e.original.dispatchEvent(H("medium-zoom:opened",{detail:{zoom:s}})),i(s)};if(e.zoomed){i(s);return}if(n)e.original=n;else if(v.length>0){var p=v;e.original=p[0]}else{i(s);return}if(e.original.dispatchEvent(H("medium-zoom:open",{detail:{zoom:s}})),R=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,k=!0,e.zoomed=$(e.original),document.body.appendChild(T),l.template){var O=b(l.template)?l.template:document.querySelector(l.template);e.template=document.createElement("div"),e.template.appendChild(O.content.cloneNode(!0)),document.body.appendChild(e.template)}if(document.body.appendChild(e.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),e.original.classList.add("medium-zoom-image--hidden"),e.zoomed.classList.add("medium-zoom-image--opened"),e.zoomed.addEventListener("click",w),e.zoomed.addEventListener("transitionend",d),e.original.getAttribute("data-zoom-src")){e.zoomedHd=e.zoomed.cloneNode(),e.zoomedHd.removeAttribute("srcset"),e.zoomedHd.removeAttribute("sizes"),e.zoomedHd.src=e.zoomed.getAttribute("data-zoom-src"),e.zoomedHd.onerror=function(){clearInterval(L),console.warn("Unable to reach the zoom image target "+e.zoomedHd.src),e.zoomedHd=null,u()};var L=setInterval(function(){e.zoomedHd.complete&&(clearInterval(L),e.zoomedHd.classList.add("medium-zoom-image--opened"),e.zoomedHd.addEventListener("click",w),document.body.appendChild(e.zoomedHd),u())},10)}else if(e.original.hasAttribute("srcset")){e.zoomedHd=e.zoomed.cloneNode(),e.zoomedHd.removeAttribute("sizes"),e.zoomedHd.removeAttribute("loading");var C=e.zoomedHd.addEventListener("load",function(){e.zoomedHd.removeEventListener("load",C),e.zoomedHd.classList.add("medium-zoom-image--opened"),e.zoomedHd.addEventListener("click",w),document.body.appendChild(e.zoomedHd),u()})}else u()})},w=function(){return new g(function(o){if(k||!e.original){o(s);return}var n=function u(){e.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(e.zoomed),e.zoomedHd&&document.body.removeChild(e.zoomedHd),document.body.removeChild(T),e.zoomed.classList.remove("medium-zoom-image--opened"),e.template&&document.body.removeChild(e.template),k=!1,e.zoomed.removeEventListener("transitionend",u),e.original.dispatchEvent(H("medium-zoom:closed",{detail:{zoom:s}})),e.original=null,e.zoomed=null,e.zoomedHd=null,e.template=null,o(s)};k=!0,document.body.classList.remove("medium-zoom--opened"),e.zoomed.style.transform="",e.zoomedHd&&(e.zoomedHd.style.transform=""),e.template&&(e.template.style.transition="opacity 150ms",e.template.style.opacity=0),e.original.dispatchEvent(H("medium-zoom:close",{detail:{zoom:s}})),e.zoomed.addEventListener("transitionend",n)})},D=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.target;return e.original?w():Y({target:n})},ie=function(){return l},de=function(){return v},ae=function(){return e.original},v=[],A=[],k=!1,R=0,l=h,e={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(m)==="[object Object]"?l=m:(m||typeof m=="string")&&W(m),l=c({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},l);var T=Z(l.background);document.addEventListener("click",z),document.addEventListener("keyup",E),document.addEventListener("scroll",j),window.addEventListener("resize",w);var s={open:Y,close:w,toggle:D,update:q,clone:I,attach:W,detach:oe,on:ne,off:re,getOptions:ie,getImages:de,getZoomedImage:ae};return s};function ee(r,m){m===void 0&&(m={});var h=m.insertAt;if(!(!r||typeof document>"u")){var g=document.head||document.getElementsByTagName("head")[0],z=document.createElement("style");z.type="text/css",h==="top"&&g.firstChild?g.insertBefore(z,g.firstChild):g.appendChild(z),z.styleSheet?z.styleSheet.cssText=r:z.appendChild(document.createTextNode(r))}}var te=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";return ee(te),F})}),xe=K(V()),je=K(V()),{default:qe,...Ie}=je,X=xe.default??qe??Ie;function Me(){document.addEventListener("DOMContentLoaded",()=>{typeof X=="function"&&X(".img-zoomable",{margin:32,background:"#00000054",scrollOffset:128})})}ye();we();Me();})();

(()=>{function he(){let t=document.querySelector(".btn"),m;window.addEventListener("scroll",function(){t.style.visibility="hidden",clearTimeout(m),m=setTimeout(function(){t.style.visibility="visible"},500)}),document.getElementById("switch-theme").addEventListener("click",function(){ye()});let l=document.getElementById("btn-menu");l&&l.addEventListener("click",function(){ve()}),document.querySelector(".btn-scroll-top").addEventListener("click",function(){document.documentElement.scrollTop=0}),document.querySelector("span.post-comment-notloaded")&&document.querySelector("span.post-comment-notloaded").addEventListener("click",loadComment)}function X(){let t=document.body.getAttribute("data-theme");return t==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t==="dark"?"dark":"light"}function ve(){let t=document.querySelector(".sidebar-mobile");t&&(t.style.display==="none"?t.setAttribute("style","display: flex;"):t.setAttribute("style","display: none;"))}function ye(){let t=X(),m=document.body.getAttribute("data-theme"),l=document.body.getAttribute("data-theme-auto")==="true",f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";if(m==="auto")document.body.setAttribute("data-theme",t==="light"?"dark":"light"),localStorage.setItem("fuji_data-theme",t==="light"?"dark":"light");else if(m==="light"){let b=f==="dark"&&l?"auto":"dark";document.body.setAttribute("data-theme",b),localStorage.setItem("fuji_data-theme",b)}else{let b=f==="light"&&l?"auto":"light";document.body.setAttribute("data-theme",b),localStorage.setItem("fuji_data-theme",b)}let y=document.querySelector(".post-comment");y&&document.querySelector("span.post-comment-notloaded").getAttribute("style")&&(y.getAttribute("data-comment")==="utterances"&&be(document.querySelector(".post-comment iframe")),y.getAttribute("data-comment")==="disqus"&&DISQUS.reset({reload:!0}))}function be(t){let m=X();t&&(m==="dark"?t.contentWindow.postMessage({type:"set-theme",theme:"photon-dark"},"https://utteranc.es"):t.contentWindow.postMessage({type:"set-theme",theme:"github-light"},"https://utteranc.es"))}function ze(){let t=document.querySelector("header"),m=t.clientHeight,l=0,f=0;document.addEventListener("scroll",function(){l=window.scrollY,l>m&&l>f?t.style.visibility="hidden":t.style.visibility="visible",f=l})}var Ee=Object.create,P=Object.defineProperty,we=Object.getOwnPropertyDescriptor,Le=Object.getOwnPropertyNames,He=Object.getPrototypeOf,ke=Object.prototype.hasOwnProperty,Oe=t=>P(t,"__esModule",{value:!0}),Ae=(t,m)=>()=>(m||t((m={exports:{}}).exports,m),m.exports),Ce=(t,m,l,f)=>{if(m&&typeof m=="object"||typeof m=="function")for(let y of Le(m))!ke.call(t,y)&&(l||y!=="default")&&P(t,y,{get:()=>m[y],enumerable:!(f=we(m,y))||f.enumerable});return t},Se=(t,m)=>Ce(Oe(P(t!=null?Ee(He(t)):{},"default",!m&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Te=Ae((t,m)=>{(function(l,f){typeof t=="object"&&typeof m!="undefined"?m.exports=f():typeof define=="function"&&define.amd?define(f):(l=l||self,l.mediumZoom=f())})(t,function(){"use strict";var l=Object.assign||function(r){for(var d=1;d<arguments.length;d++){var h=arguments[d];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(r[g]=h[g])}return r},f=function(r){return r.tagName==="IMG"},y=function(r){return NodeList.prototype.isPrototypeOf(r)},b=function(r){return r&&r.nodeType===1},B=function(r){var d=r.currentSrc||r.src;return d.substr(-4).toLowerCase()===".svg"},_=function(r){try{return Array.isArray(r)?r.filter(f):y(r)?[].slice.call(r).filter(f):b(r)?[r].filter(f):typeof r=="string"?[].slice.call(document.querySelectorAll(r)).filter(f):[]}catch(d){throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},K=function(r){var d=document.createElement("div");return d.classList.add("medium-zoom-overlay"),d.style.background=r,d},V=function(r){var d=r.getBoundingClientRect(),h=d.top,g=d.left,z=d.width,j=d.height,E=r.cloneNode(),q=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,I=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return E.removeAttribute("id"),E.style.position="absolute",E.style.top=h+q+"px",E.style.left=g+I+"px",E.style.width=z+"px",E.style.height=j+"px",E.style.transform="",E},H=function(r,d){var h=l({bubbles:!1,cancelable:!1,detail:void 0},d);if(typeof window.CustomEvent=="function")return new CustomEvent(r,h);var g=document.createEvent("CustomEvent");return g.initCustomEvent(r,h.bubbles,h.cancelable,h.detail),g},Z=function r(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=window.Promise||function(o){function n(){}o(n,n)},z=function(o){var n=o.target;if(n===T){w();return}v.indexOf(n)!==-1&&R({target:n})},j=function(){if(!(k||!e.original)){var o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(U-o)>c.scrollOffset&&setTimeout(w,150)}},E=function(o){var n=o.key||o.keyCode;(n==="Escape"||n==="Esc"||n===27)&&w()},q=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o;if(o.background&&(T.style.background=o.background),o.container&&o.container instanceof Object&&(n.container=l({},c.container,o.container)),o.template){var u=b(o.template)?o.template:document.querySelector(o.template);n.template=u}return c=l({},c,n),v.forEach(function(i){i.dispatchEvent(H("medium-zoom:update",{detail:{zoom:s}}))}),s},I=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r(l({},c,o))},W=function(){for(var o=arguments.length,n=Array(o),u=0;u<o;u++)n[u]=arguments[u];var i=n.reduce(function(a,p){return[].concat(a,_(p))},[]);return i.filter(function(a){return v.indexOf(a)===-1}).forEach(function(a){v.push(a),a.classList.add("medium-zoom-image")}),S.forEach(function(a){var p=a.type,O=a.listener,L=a.options;i.forEach(function(A){A.addEventListener(p,O,L)})}),s},ee=function(){for(var o=arguments.length,n=Array(o),u=0;u<o;u++)n[u]=arguments[u];e.zoomed&&w();var i=n.length>0?n.reduce(function(a,p){return[].concat(a,_(p))},[]):v;return i.forEach(function(a){a.classList.remove("medium-zoom-image"),a.dispatchEvent(H("medium-zoom:detach",{detail:{zoom:s}}))}),v=v.filter(function(a){return i.indexOf(a)===-1}),s},te=function(o,n){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return v.forEach(function(i){i.addEventListener("medium-zoom:"+o,n,u)}),S.push({type:"medium-zoom:"+o,listener:n,options:u}),s},oe=function(o,n){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return v.forEach(function(i){i.removeEventListener("medium-zoom:"+o,n,u)}),S=S.filter(function(i){return!(i.type==="medium-zoom:"+o&&i.listener.toString()===n.toString())}),s},D=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.target,u=function(){var i={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},a=void 0,p=void 0;if(c.container)if(c.container instanceof Object)i=l({},i,c.container),a=i.width-i.left-i.right-c.margin*2,p=i.height-i.top-i.bottom-c.margin*2;else{var O=b(c.container)?c.container:document.querySelector(c.container),L=O.getBoundingClientRect(),A=L.width,M=L.height,de=L.left,ae=L.top;i=l({},i,{width:A,height:M,left:de,top:ae})}a=a||i.width-c.margin*2,p=p||i.height-c.margin*2;var C=e.zoomedHd||e.original,me=B(C)?a:C.naturalWidth||a,ce=B(C)?p:C.naturalHeight||p,x=C.getBoundingClientRect(),le=x.top,ue=x.left,Y=x.width,G=x.height,se=Math.min(me,a)/Y,fe=Math.min(ce,p)/G,N=Math.min(se,fe),ge=(-ue+(a-Y)/2+c.margin+i.left)/N,pe=(-le+(p-G)/2+c.margin+i.top)/N,Q="scale("+N+") translate3d("+ge+"px, "+pe+"px, 0)";e.zoomed.style.transform=Q,e.zoomedHd&&(e.zoomedHd.style.transform=Q)};return new g(function(i){if(n&&v.indexOf(n)===-1){i(s);return}var a=function M(){k=!1,e.zoomed.removeEventListener("transitionend",M),e.original.dispatchEvent(H("medium-zoom:opened",{detail:{zoom:s}})),i(s)};if(e.zoomed){i(s);return}if(n)e.original=n;else if(v.length>0){var p=v;e.original=p[0]}else{i(s);return}if(e.original.dispatchEvent(H("medium-zoom:open",{detail:{zoom:s}})),U=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,k=!0,e.zoomed=V(e.original),document.body.appendChild(T),c.template){var O=b(c.template)?c.template:document.querySelector(c.template);e.template=document.createElement("div"),e.template.appendChild(O.content.cloneNode(!0)),document.body.appendChild(e.template)}if(document.body.appendChild(e.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),e.original.classList.add("medium-zoom-image--hidden"),e.zoomed.classList.add("medium-zoom-image--opened"),e.zoomed.addEventListener("click",w),e.zoomed.addEventListener("transitionend",a),e.original.getAttribute("data-zoom-src")){e.zoomedHd=e.zoomed.cloneNode(),e.zoomedHd.removeAttribute("srcset"),e.zoomedHd.removeAttribute("sizes"),e.zoomedHd.src=e.zoomed.getAttribute("data-zoom-src"),e.zoomedHd.onerror=function(){clearInterval(L),console.warn("Unable to reach the zoom image target "+e.zoomedHd.src),e.zoomedHd=null,u()};var L=setInterval(function(){e.zoomedHd.complete&&(clearInterval(L),e.zoomedHd.classList.add("medium-zoom-image--opened"),e.zoomedHd.addEventListener("click",w),document.body.appendChild(e.zoomedHd),u())},10)}else if(e.original.hasAttribute("srcset")){e.zoomedHd=e.zoomed.cloneNode(),e.zoomedHd.removeAttribute("sizes"),e.zoomedHd.removeAttribute("loading");var A=e.zoomedHd.addEventListener("load",function(){e.zoomedHd.removeEventListener("load",A),e.zoomedHd.classList.add("medium-zoom-image--opened"),e.zoomedHd.addEventListener("click",w),document.body.appendChild(e.zoomedHd),u()})}else u()})},w=function(){return new g(function(o){if(k||!e.original){o(s);return}var n=function u(){e.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(e.zoomed),e.zoomedHd&&document.body.removeChild(e.zoomedHd),document.body.removeChild(T),e.zoomed.classList.remove("medium-zoom-image--opened"),e.template&&document.body.removeChild(e.template),k=!1,e.zoomed.removeEventListener("transitionend",u),e.original.dispatchEvent(H("medium-zoom:closed",{detail:{zoom:s}})),e.original=null,e.zoomed=null,e.zoomedHd=null,e.template=null,o(s)};k=!0,document.body.classList.remove("medium-zoom--opened"),e.zoomed.style.transform="",e.zoomedHd&&(e.zoomedHd.style.transform=""),e.template&&(e.template.style.transition="opacity 150ms",e.template.style.opacity=0),e.original.dispatchEvent(H("medium-zoom:close",{detail:{zoom:s}})),e.zoomed.addEventListener("transitionend",n)})},R=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.target;return e.original?w():D({target:n})},ne=function(){return c},re=function(){return v},ie=function(){return e.original},v=[],S=[],k=!1,U=0,c=h,e={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(d)==="[object Object]"?c=d:(d||typeof d=="string")&&W(d),c=l({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},c);var T=K(c.background);document.addEventListener("click",z),document.addEventListener("keyup",E),document.addEventListener("scroll",j),window.addEventListener("resize",w);var s={open:D,close:w,toggle:R,update:q,clone:I,attach:W,detach:ee,on:te,off:oe,getOptions:ne,getImages:re,getZoomedImage:ie};return s};function $(r,d){d===void 0&&(d={});var h=d.insertAt;if(!(!r||typeof document=="undefined")){var g=document.head||document.getElementsByTagName("head")[0],z=document.createElement("style");z.type="text/css",h==="top"&&g.firstChild?g.insertBefore(z,g.firstChild):g.appendChild(z),z.styleSheet?z.styleSheet.cssText=r:z.appendChild(document.createTextNode(r))}}var F=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";return $(F),Z})}),xe=Se(Te()),J=xe.default;document.addEventListener("DOMContentLoaded",function(){typeof J=="function"&&J(".img-zoomable",{margin:32,background:"#00000054",scrollOffset:128})});he();ze();})();
